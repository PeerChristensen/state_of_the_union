
  <!DOCTYPE html><meta charset=UTF-8>
  <style>.node rect{cursor:pointer;fill:#fff;fill-opacity:.5;stroke:#3182bd;stroke-width:1.5px;}
  .node text{font:10px sans-serif;pointer-events:none;}
  path.link{fill:none;stroke:#9ecae1;stroke-width:1.5px;}
  .control.glyphicon{position:static;color:#4A4C4F;font-family:"Oxygen", sans-serif;cursor:pointer;}
  .scrollbox{height: 120px;border: 1px solid #e5e5e5;overflow: scroll;}
  .bar{fill: steelblue;}.axis{font: 10px sans-serif;}.axis path,.axis line{fill: none; stroke: #000;
  shape-rendering: crispEdges;}.x.axis path{display: none;}</style>
  <link href="https://fonts.googleapis.com/css?family=Oxygen" rel=stylesheet type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel=stylesheet>
  <title>STM Visualization</title><body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script>var margin={top:30,right:20,bottom:30,left:20},width=window.innerWidth/1.5-margin.left-margin.right,height=window.innerHeight-margin.top-margin.bottom,barHeight=20,barWidth=width*.8;
  var i=0,duration=400,root;var tree=d3.layout.tree().nodeSize([0,20]);var diagonal=d3.svg.diagonal().projection(function(d){return[d.y,d.x];});
  var svg=d3.select("body").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");
  root= {"children":[{"name":["made, great, country, upon, congress, public, government"],"children":[{"name":["war, citizens, peace, public, congress, country, government"],"children":[{"name":["rebellion, constitution, restoration, insurrection, ending, 1867, circuit"],"size":[1800],"topic_no":[9],"thought_1":[],"thought_2":[],"prob":["government, congress, upon, constitution, people, country, general"],"frex":["rebellion, constitution, restoration, insurrection, ending, 1867, circuit"],"lift":["temperate, freedmen, insurgent, pardon, 1867, treason, 1849"],"score":["temperate, rebellion, 1867, 1861, insurgent, circuit, condition"],"proportion":["0.04"]},{"name":["militia, enemy, british, orders, ensuing, legislature, whilst"],"size":[1800],"topic_no":[24],"thought_1":[],"thought_2":[],"prob":["public, war, peace, country, us, citizens, government"],"frex":["militia, enemy, british, orders, ensuing, legislature, whilst"],"lift":["companions, tripoli, effusion, distinguish, proofs, persuasion, northwestern"],"score":["militia, companions, tribes, whilst, british, savages, legislature"],"proportion":["0.09"]}],"topic_no":[9,24]},{"name":["colonies, spain, likewise, fortifications, negotiation, presumed, parties"],"size":[1800],"topic_no":[29],"thought_1":[],"thought_2":[],"prob":["congress, great, government, last, upon, made, year"],"frex":["colonies, spain, likewise, fortifications, negotiation, presumed, parties"],"lift":["blockades, pensacola, 1822, 1827, ghent, 1817, 3rd"],"score":["blockades, intercourse, spain, tribes, 1827, objects, presumed"],"proportion":["0.06"]},{"name":["gentlemen, majesty, article, commissioners, emancipation, damages, amity"],"size":[1800],"topic_no":[22],"thought_1":[],"thought_2":[],"prob":["treaty, shall, government, country, great, congress, part"],"frex":["gentlemen, majesty, article, commissioners, emancipation, damages, amity"],"lift":["damages, wines, emancipation, captures, gentlemen, catholic, explanations"],"score":["damages, commissioners, article, majesty, gentlemen, amity, emancipation"],"proportion":["0.04"]},{"name":["congress, made, country, public, government, subject, upon"],"children":[{"name":["chambers, proposition, acres, california, stipulations, arrangement, relation"],"size":[1800],"topic_no":[14],"thought_1":[],"thought_2":[],"prob":["government, congress, upon, public, great, subject, country"],"frex":["chambers, proposition, acres, california, stipulations, arrangement, relation"],"lift":["disavowed, 1851, chambers, mosquito, ministry, 1854, 1850"],"score":["disavowed, chambers, objects, stipulations, intercourse, territory, isthmus"],"proportion":["0.03"]},{"name":["bank, objects, liberal, disposition, french, removal, calculated"],"size":[1800],"topic_no":[16],"thought_1":[],"thought_2":[],"prob":["government, upon, public, congress, made, general, country"],"frex":["bank, objects, liberal, disposition, french, removal, calculated"],"lift":["subscriptions, withstanding, 1833, 1834, buoys, 1832, 1829"],"score":["subscriptions, objects, intercourse, indians, tribes, disposition, 1833"],"proportion":["0.04"]}],"topic_no":[14,16]}],"topic_no":[9,24,29,22,14,16]},{"name":["government, year, new, people, world, congress, now"],"children":[{"name":["people, government, congress, year, american, new, now"],"children":[{"name":["government, war, country, people, year, congress, upon"],"children":[{"name":["congress, upon, public, mexico, country, people, government"],"children":[{"name":["mexico, texas, mexican, whilst, constitution, oregon, california"],"size":[1800],"topic_no":[4],"thought_1":[],"thought_2":[],"prob":["government, congress, mexico, upon, war, country, constitution"],"frex":["mexico, texas, mexican, whilst, constitution, oregon, california"],"lift":["nueces, paredes, cruz, vera, 1844, 1845, 1859"],"score":["mexico, paredes, texas, whilst, oregon, mexican, kansas"],"proportion":["0.04"]},{"name":["currency, paper, notes, banks, specie, bank, circulation"],"size":[1800],"topic_no":[28],"thought_1":[],"thought_2":[],"prob":["government, public, upon, country, great, congress, people"],"frex":["currency, paper, notes, banks, specie, bank, circulation"],"lift":["exchequer, 1837, 1838, expansions, depreciated, paper, monarchical"],"score":["specie, notes, exchequer, circulation, paper, currency, banks"],"proportion":["0.04"]}],"topic_no":[4,28]},{"name":["upon, congress, made, last, government, great, year"],"children":[{"name":["silver, 1890, 1892, 1891, cent, value, per"],"size":[1800],"topic_no":[13],"thought_1":[],"thought_2":[],"prob":["upon, government, year, congress, made, law, great"],"frex":["silver, 1890, 1892, 1891, cent, value, per"],"lift":["1892, meats, 1890, 1891, 1889, allotments, registry"],"score":["1892, 1890, 1891, silver, 1889, cent, coinage"],"proportion":["0.03"]},{"name":["herewith, cuba, currency, specie, claims, 1869, persons"],"size":[1800],"topic_no":[18],"thought_1":[],"thought_2":[],"prob":["government, congress, upon, year, country, made, last"],"frex":["herewith, cuba, currency, specie, claims, 1869, persons"],"lift":["arbitrators, 1876, 1869, 1874, 1873, 1871, expatriation"],"score":["arbitrators, specie, 1869, herewith, cable, claims, correspondence"],"proportion":["0.05"]}],"topic_no":[13,18]},{"name":["corporations, interstate, man, forest, supervision, merely, conditions"],"size":[1800],"topic_no":[20],"thought_1":[],"thought_2":[],"prob":["government, law, upon, great, people, men, public"],"frex":["corporations, interstate, man, forest, supervision, merely, conditions"],"lift":["anarchist, rebates, wrongdoer, wageworkers, 1917, wrongdoing, shipper"],"score":["interstate, 1917, islands, corporations, navy, forest, wrongdoing"],"proportion":["0.04"]},{"name":["year, government, congress, country, upon, made, american"],"children":[{"name":["statute, 1911, canal, tariff, arbitration, 1909, panama"],"size":[1800],"topic_no":[15],"thought_1":[],"thought_2":[],"prob":["government, american, congress, department, upon, foreign, law"],"frex":["statute, 1911, canal, tariff, arbitration, 1909, panama"],"lift":["exploitation, 1911, 1912, 1910, opium, 1909, douglas"],"score":["1911, exploitation, 1909, 1912, 1910, wool, arbitration"],"proportion":["0.02"]},{"name":["cuba, 1899, spanish, islands, 1898, 1900, colombia"],"size":[1800],"topic_no":[26],"thought_1":[],"thought_2":[],"prob":["government, congress, upon, year, american, made, treaty"],"frex":["cuba, 1899, spanish, islands, 1898, 1900, colombia"],"lift":["1882, 1899, 1896, 1897, 1898, manila, exhibitors"],"score":["1882, 1899, 1898, 1900, islands, 1897, spain"],"proportion":["0.04"]}],"topic_no":[15,26]},{"name":["u.s, 1980, oil, energy, coal, 1981, soviet"],"size":[1800],"topic_no":[8],"thought_1":[],"thought_2":[],"prob":["congress, new, administration, energy, federal, years, program"],"frex":["u.s, 1980, oil, energy, coal, 1981, soviet"],"lift":["fy, barrels, solar, 1981, 1982, refugee, 1979"],"score":["u.s, 1980, soviet, nuclear, programs, program, barrels"],"proportion":["0.01"]},{"name":["congress, us, american, year, world, people, new"],"children":[{"name":["vietnam, billion, tonight, try, poverty, think, cities"],"size":[1800],"topic_no":[12],"thought_1":[],"thought_2":[],"prob":["congress, year, people, us, years, new, billion"],"frex":["vietnam, billion, tonight, try, poverty, think, cities"],"lift":["1968, 1964, vietnam, vietnamese, responsibly, talks, rose"],"score":["vietnam, tonight, 1968, billion, percent, programs, budget"],"proportion":["0.02"]},{"name":["hussein, nuclear, alliance, saddam, recession, seek, communist"],"size":[1800],"topic_no":[23],"thought_1":[],"thought_2":[],"prob":["world, new, nations, american, peace, people, nation"],"frex":["hussein, nuclear, alliance, saddam, recession, seek, communist"],"lift":["hussein, un, saddam, iraq's, thinks, salt, dictator"],"score":["hussein, nuclear, saddam, communist, soviet, tonight, programs"],"proportion":["0.02"]}],"topic_no":[12,23]},{"name":["japanese, fighting, 1942, victory, production, enemies, nurses"],"size":[1800],"topic_no":[5],"thought_1":[],"thought_2":[],"prob":["war, world, us, peace, people, men, production"],"frex":["japanese, fighting, 1942, victory, production, enemies, nurses"],"lift":["1942, axis, 1944, tanks, 1943, nazi, nurses"],"score":["1942, 1944, planes, japanese, axis, jobs, fighting"],"proportion":["0.03"]},{"name":["silver, 1885, coinage, citizenship, 1884, bonds, taxation"],"size":[1800],"topic_no":[7],"thought_1":[],"thought_2":[],"prob":["government, upon, year, people, last, public, present"],"frex":["silver, 1885, coinage, citizenship, 1884, bonds, taxation"],"lift":["sheep, 1885, 1886, coined, 1884, 1888, 1887"],"score":["sheep, 1885, silver, coinage, 1884, 1888, indians"],"proportion":["0.02"]},{"name":["us, america, applause, security, people, world, country"],"children":[{"name":["applause, terrorists, terrorist, terror, afghanistan, al, regime"],"size":[1800],"topic_no":[3],"thought_1":[],"thought_2":[],"prob":["applause, america, world, people, american, us, country"],"frex":["applause, terrorists, terrorist, terror, afghanistan, al, regime"],"lift":["qaeda, terrorist, al, disarm, regimes, homeland, terrorists"],"score":["applause, qaeda, terrorists, tonight, terrorist, afghanistan, al"],"proportion":["0.02"]},{"name":["applause, iraq, terrorists, medicare, seniors, retirement, iraqi"],"size":[1800],"topic_no":[25],"thought_1":[],"thought_2":[],"prob":["applause, america, people, security, country, make, government"],"frex":["applause, iraq, terrorists, medicare, seniors, retirement, iraqi"],"lift":["laughter, iraqis, applause, iraq's, iraqi, prescription, marriage"],"score":["applause, laughter, iraq, terrorists, tonight, medicare, iraqi"],"proportion":["0.02"]}],"topic_no":[3,25]}],"topic_no":[4,28,13,18,20,15,26,8,12,23,5,7,3,25]},{"name":["america, us, year, work, people, now, new"],"children":[{"name":["21st, century, teachers, medicare, parents, millennium, bipartisan"],"size":[1800],"topic_no":[6],"thought_1":[],"thought_2":[],"prob":["now, century, america, new, year, americans, years"],"frex":["21st, century, teachers, medicare, parents, millennium, bipartisan"],"lift":["greenhouse, internet, jonesboro, generation's, millennium, kosovo, graders"],"score":["tonight, medicare, 21st, jonesboro, bipartisan, internet, millennium"],"proportion":["0.01"]},{"name":["family, something, parents, get, tell, challenge, families"],"size":[1800],"topic_no":[19],"thought_1":[],"thought_2":[],"prob":["people, us, new, america, work, american, year"],"frex":["family, something, parents, get, tell, challenge, families"],"lift":["kids, teen, row, gangs, toxic, tougher, covenant"],"score":["tonight, kids, jobs, budget, america's, nuclear, tell"],"proportion":["0.05"]}],"topic_no":[6,19]},{"name":["us, government, year, years, new, people, world"],"children":[{"name":["spending, inflation, programs, jobs, deficits, unemployment, growth"],"size":[1800],"topic_no":[1],"thought_1":[],"thought_2":[],"prob":["government, people, us, federal, year, new, world"],"frex":["spending, inflation, programs, jobs, deficits, unemployment, growth"],"lift":["1973, 1975, realism, 1985, 1976, freeze, needy"],"score":["programs, jobs, 1973, spending, tonight, economic, budget"],"proportion":["0.05"]},{"name":["1974, 5, clean, seventies, truly, decade, environment"],"size":[1800],"topic_no":[17],"thought_1":[],"thought_2":[],"prob":["new, america, years, people, world, peace, congress"],"frex":["1974, 5, clean, seventies, truly, decade, environment"],"lift":["1971, seventies, 1974, sixties, 200th, colleagues, involvement"],"score":["1974, 1971, tonight, today, seventies, programs, america's"],"proportion":["0.01"]}],"topic_no":[1,17]}],"topic_no":[4,28,13,18,20,15,26,8,12,23,5,7,3,25,6,19,1,17]},{"name":["agriculture, method, court, farmer, marketing, agricultural, cooperative"],"size":[1800],"topic_no":[27],"thought_1":[],"thought_2":[],"prob":["government, made, congress, country, public, national, people"],"frex":["agriculture, method, court, farmer, marketing, agricultural, cooperative"],"lift":["livelihood, 1925, consolidations, 1921, league, muscle, shoals"],"score":["livelihood, marketing, economic, 1925, veterans, reclamation, irrigation"],"proportion":["0.03"]},{"name":["shall, congress, war, upon, world, people, government"],"children":[{"name":["banks, depression, 1928, construction, agencies, relief, unemployment"],"size":[1800],"topic_no":[2],"thought_1":[],"thought_2":[],"prob":["government, upon, congress, federal, public, year, national"],"frex":["banks, depression, 1928, construction, agencies, relief, unemployment"],"lift":["41, 1928, 1931, insistent, electrical, 1929, drought"],"score":["41, 1928, unemployment, economic, 1929, cent, 1931"],"proportion":["0.02"]},{"name":["thought, processes, hundred, democracy, industrial, matter, definite"],"size":[1800],"topic_no":[10],"thought_1":[],"thought_2":[],"prob":["government, upon, world, war, people, great, shall"],"frex":["thought, processes, hundred, democracy, industrial, matter, definite"],"lift":["autocracy, 1933, programme, serviceable, instrumentalities, henceforth, infinitely"],"score":["autocracy, 1933, democracy, processes, shall, programme, economic"],"proportion":["0.06"]}],"topic_no":[2,10]},{"name":["1947, dollars, 1946, 1945, million, veterans, fiscal"],"size":[1800],"topic_no":[11],"thought_1":[],"thought_2":[],"prob":["war, dollars, year, million, government, fiscal, expenditures"],"frex":["1947, dollars, 1946, 1945, million, veterans, fiscal"],"lift":["demobilization, 1947, reconversion, authorizations, prewar, 1945, 1946"],"score":["1947, 1946, 1945, demobilization, reconversion, program, billion"],"proportion":["0.01"]},{"name":["government, people, economic, congress, world, free, nations"],"children":[{"name":["farm, program, management, projects, collective, economic, insurance"],"size":[1800],"topic_no":[21],"thought_1":[],"thought_2":[],"prob":["government, congress, world, new, federal, program, people"],"frex":["farm, program, management, projects, collective, economic, insurance"],"lift":["1953, 1954, 1952, bargaining, operational, collective, balancing"],"score":["1953, program, economic, programs, communist, atomic, today"],"proportion":["0.06"]},{"name":["soviet, communist, free, aggression, atomic, korea, ahead"],"size":[1800],"topic_no":[30],"thought_1":[],"thought_2":[],"prob":["world, free, nations, us, war, people, soviet"],"frex":["soviet, communist, free, aggression, atomic, korea, ahead"],"lift":["1951, curtain, imperialism, 1949, communists, satellites, asset"],"score":["soviet, communist, 1951, atomic, economic, communists, ahead"],"proportion":["0.03"]}],"topic_no":[21,30]}],"topic_no":[4,28,13,18,20,15,26,8,12,23,5,7,3,25,6,19,1,17,27,2,10,11,21,30]}],"topic_no":[9,24,29,22,14,16,4,28,13,18,20,15,26,8,12,23,5,7,3,25,6,19,1,17,27,2,10,11,21,30],"name":["STM Model"],"this_root":[true],"summary":["A topic model with 30 topics, 214 documents and a 7400 word dictionary."],"proportions":[0.0471,0.0224,0.0162,0.0371,0.0254,0.0113,0.0206,0.0093,0.0387,0.0567,0.0081,0.0229,0.0271,0.0281,0.019,0.0409,0.0141,0.0458,0.0474,0.0351,0.059,0.0399,0.0231,0.0865,0.0152,0.0414,0.0326,0.0426,0.0605,0.0259]}
 
 root.x0=0;root.y0=0;update(root);function update(source){var nodes=tree.nodes(root);var height=Math.max(500,nodes.length*barHeight+margin.top+margin.bottom);
  d3.select("svg").transition().duration(duration).attr("height",height);d3.select(self.frameElement).transition().duration(duration).style("height",height+"px");nodes.forEach(function(n,i){n.x=i*barHeight;});
  var node=svg.selectAll("g.node").data(nodes,function(d){return d.id||(d.id=++i);});
  var nodeEnter=node.enter().append("g").attr("class",function(d){if(d.size){return"node leaf"}else{return"node noleaf"}}).attr("transform",function(d){return"translate("+source.y0+","+source.x0+")";}).style("opacity",1e-6);
  nodeEnter.append("rect").data(nodes).attr("y",-barHeight/2).attr("height",barHeight).attr("width",barWidth).style("fill",color).on("click",clickModal);nodeEnter.append("text").attr("dy",3.5).attr("dx",5.5).text(function(d){if (d.children){return d.name;}else{return d.topic_no + ": " + d.name;}});
  d3.selectAll("g.noleaf").append("svg:foreignObject").attr("width",20).attr("height",20).attr("y","-10px").attr("x",barWidth-15).append("xhtml:span").attr("class","control glyphicon glyphicon-minus").attr("width","30").on("click",function(d){click(d);});
  nodeEnter.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")";}).style("opacity",1);node.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")";}).style("opacity",1).select("rect").style("fill",color);
  node.exit().transition().duration(duration).attr("transform",function(d){return"translate("+source.y+","+source.x+")";}).style("opacity",1e-6).remove();
  var link=svg.selectAll("path.link").data(tree.links(nodes),function(d){return d.target.id;});link.enter().insert("path","g").attr("class","link").attr("d",function(d){var o={x:source.x0,y:source.y0};return diagonal({source:o,target:o});}).transition().duration(duration).attr("d",diagonal);
  link.transition().duration(duration).attr("d",diagonal);link.exit().transition().duration(duration).attr("d",function(d){var o={x:source.x,y:source.y};return diagonal({source:o,target:o});}).remove();nodes.forEach(function(d){d.x0=d.x;d.y0=d.y;});}
  function click(d){if(d.children){d._children=d.children;d.children=null;}else{d.children=d._children;d._children=null;}update(d);}
  function color(d){return d._children?"#3182bd":d.children?"#c6dbef":"#fd8d3c";}
  function clickModal(d){if(d.size){$("#doc1").text(d.thought_1);$("#doc2").text(d.thought_2);$("#high-prob").text("Highest Probability: "+d.prob);$("#topicModalLabel").text("Topic "+d.topic_no+" Information");$("#frex").text("FREX: "+d.frex);$("#lift").text("Lift: "+d.lift);
  $("#score").text("Score: "+d.score);$("#proportion").text(""+d.proportion);$("#modelBody").hide();$("#clusterBody").hide();$("#topicBody").show();$("#topicModal").modal("show");}else if(d.this_root){$("#topicModalLabel").text("Fitted Model Information");$("#mod1-text").text(d.summary);$("#topicBody").hide();
  $("#clusterBody").hide();$("#modelBody").show();$("#topicModal").modal("show");if ($("#barchartDiv").children().length == 2){proportionChart();}}else{$("#topicModalLabel").text("Cluster Information");$("#clust1-text").text("This cluster comprises topics "+d.topic_no.join(", ")+".");$("#topicBody").hide();$("#modelBody").hide();
  $("#clusterBody").show();$("#topicModal").modal("show");}} function proportionChart(){for(var t=window.innerHeight/3.5,a=window.innerWidth/2.5,r=35,e=35,n=root.proportions.length,o=[.5];o.length<n;)o.push(o[o.length]+1);var i=d3.select("#barchartDiv").append("svg").attr({width:a,height:t,style:"display: block; margin: auto;"}),
  l=d3.scale.linear().domain([0,d3.max(root.proportions)]).range([0,t-r]),s=d3.scale.linear().domain([0,n]).range([0,a-e]),d=d3.scale.linear().domain([0,d3.max(root.proportions)]).range([t-r,0]),p=d3.svg.axis().scale(d).orient("left"),c=d3.svg.axis().scale(s).orient("bottom").tickValues(d3.range(.5,n+.5,1));
  i.selectAll("rect").data(root.proportions).enter().append("rect").attr({x:function(t,r){return r*(a-e)/n+e},y:function(a){return t-l(a)-r},width:(a-e)/n-1,height:l,fill:"orange"}),
  i.append("g").attr({"class":"axis",transform:"translate("+e+","+(t-r)+")"}).call(c),i.append("g").attr({"class":"axis",transform:"translate("+e+")"}).call(p),i.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",a/2).attr("y",t-6).text("Topic")}</script>
  <div class="modal fade" id="topicModal" tabindex="-1" role="dialog" aria-labelledby="topicModalLabel" aria-hidden="true">
  <div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="topicModalLabel">Topic Information</h4></div>
  <div class="modal-body" id="topicBody"><h5>Top Words</h5><ul id="word-list"><li id="high-prob">Highest Probability: </li><li id="frex">FREX: </li><li id="lift">Lift: </li><li id="score">Score: </li></ul><hr><h5>Representative Documents</h5>
  <div id="doc1" class="modal-body scrollbox"></div>
  <br><div id="doc2" class="modal-body scrollbox"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div><div class="modal-body" id="modelBody"><h5>Summary</h5><span id="mod1-text"></span><hr><div id="barchartDiv">
  <h5>Topic Proportions in Corpus</h5><br></div><br><div class="modal-footer">
  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div><div class="modal-body" id="clusterBody"><h5>Summary</h5><span id="clust1-text"></span><br><br><div class="modal-footer">
  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div></body>
